name: 👷 CI
on:
  push:
    branches: main
  workflow_dispatch:

jobs:
  build:
    name: "🛠️ Build"
    uses: ./.github/workflows/build-workflow.yml
    with:
      pre_release: true

  deploy:
    name: "🚀 Publish"
    needs: [build]
    uses: ./.github/workflows/deploy-workflow.yml
    with:
      artifact: ${{ needs.build.outputs.artifact-name }}
      pre_release: true
    secrets: inherit
